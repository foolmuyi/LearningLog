- [基础指南](#基础指南)
  - [参考坐标系](#参考坐标系)
  - [常用快捷键](#常用快捷键)
- [开始](#开始)
  - [添加参考坐标系](#添加参考坐标系)
  - [导入3D目标](#导入3d目标)
  - [添加TCP](#添加tcp)
  - [添加目标位姿](#添加目标位姿)
  - [添加机器人运动程序](#添加机器人运动程序)
  - [添加主程序](#添加主程序)
- [界面](#界面)
  - [机器人面板](#机器人面板)
  - [机器人位姿](#机器人位姿)
  - [物体设置](#物体设置)
- [机器人程序](#机器人程序)
  - [新建程序](#新建程序)
  - [程序指令](#程序指令)
    - [显示信息指令](#显示信息指令)
    - [暂停指令](#暂停指令)
    - [设置轨迹精度](#设置轨迹精度)
    - [仿真指令](#仿真指令)
- [机器人制造](#机器人制造)
- [提示和技巧](#提示和技巧)
- [一般提示](#一般提示)
  - [标定工具（TCP）](#标定工具tcp)
  - [定义参考坐标系](#定义参考坐标系)
  - [标定转台](#标定转台)
    - [标定一轴转台](#标定一轴转台)
    - [标定二轴转台](#标定二轴转台)
  - [创建机构或机器人](#创建机构或机器人)
    - [如何创建一轴转台](#如何创建一轴转台)
    - [如何创建六轴机器人](#如何创建六轴机器人)
    - [如何创建三轴笛卡尔机器人](#如何创建三轴笛卡尔机器人)
  - [同步外部轴](#同步外部轴)
- [Plugins](#plugins)
  - [用于SolidWorks](#用于solidworks)
- [碰撞检测](#碰撞检测)
- [Robot Tips](#robot-tips)
- [后置处理器](#后置处理器)
- [RoboDK API](#robodk-api)
- [机器人驱动](#机器人驱动)
- [Accuracy](#accuracy)


# 基础指南

## 参考坐标系

- 在默认设置下，RoboDK显示参考坐标系之间的关系为XYZ坐标及X➔Y➔Z顺序的欧拉角格式。这意味着几何旋转将按照下面的顺序：
    1.首先：围绕X轴旋转一个角度
    2.接着：围绕静态Y轴旋转一个角度
    3.最后：围绕静态Z轴旋转一个角度
发那科（Fanuc）与安川（Motoman）机器人的控制器接受以上所描述的旋转格式。但是，其他机器人生产商使用的是不同的旋转顺序。例如，史陶比尔（Stäubli）机器人使用X➔Y’➔Z’’顺序，库卡（KUKA）机器人与那智（Nachi）机器人使用Z➔Y’➔X’’顺序，ABB机器人使用四元数旋转格式。在坐标系的设置界面，RoboDK提供了多种不同的旋转格式以供选择。

## 常用快捷键

- 左键单击选中物体；按住滚轮平移；按住右键旋转；滚动滚轮缩放。
- 按住Alt键，然后鼠标左键拖动坐标轴可以移动坐标系；或者先点击工具栏的移动坐标系工具（如下图），然后拖动坐标轴。
- 按住Alt+Shift键，然后鼠标左键拖动TCP的坐标轴可以移动TCP；或者先点击工具栏的移动TCP工具（如下图），然后拖动TCP的坐标轴。
![移动坐标系和TCP](./imgs/TwoIcons.png)
- `+`和`-`键可以放大和缩小坐标系。
- `*`键可以查看机器人的工作空间。

# 开始

## 添加参考坐标系

- 当需要添加一个相对于机器人底座的坐标系时，选中机器人底座坐标系，点击右键，然后选择“添加参考系”。从树状图可以看到，这样添加的坐标系在机器人底座坐标系下，意味着与机器人底座坐标系绑定，当机器人底座移动时该坐标系会跟着一起移动。
![ 添加参考坐标系 ](./imgs/NewFrame.png)

## 导入3D目标

- 拖拽树状图中的各个项目，可以改变他们的从属关系。例如将导入的工件拖拽到工件坐标系下。

## 添加TCP

- 从外部导入末端工具的3D模型文件后，将其拖拽到树状图中机器人下使其从属于机器人即可，然后可以双击工具设定TCP相对法兰的位置（RoboDK默认为[0, 0, 200, 0, 0, 0]）。
![添加TCP](./imgs/Tool.png)

- 如果末端工具的3D模型有问题，使得工具安装在机器人上的实际状态与仿真中的状态不一致，可以通过双击工具然后在工具详情界面“更多选项”中的“移动几何”对工具的位姿进行调整。“应用缩放”选项可以按照一定比例改变工具的大小，方便碰撞检测等场景（确保真实工具不会发生碰撞）的应用。
![修改工具位姿](./imgs/ToolEdit.png)

## 添加目标位姿

使用工具栏中的“添加新的目标点”快捷方式（如下图）来添加目标位姿。
![添加目标位姿](./imgs/AddTarget.png)

## 添加机器人运动程序

首先点击工具栏中的添加程序快捷方式，然后选中一个目标位姿作为机器人移动的目标，再点击工具栏的添加关节运动或者添加直线运动的快捷方式，一个使机器人移动到指定位置的程序就设置好了。如果需要移动到多个点，就按上述方式继续添加后续目标点。
![添加机器人仿真程序](./imgs/AddProgram.png) ![添加运动方式](./imgs/MoveLJ.png) ![程序示例](./imgs/SimpleProgram.png)

## 添加主程序

- 首先还是和上述添加机器人运动程序一样点击添加程序快捷方式，然后点击工具栏的“程序调用或插入代码指令”快捷方式，点击“选择程序”选中要调用的子程序。如果要依次调用多段子程序，重复上述步骤。

![添加程序](./imgs/AddProgram.png) ![程序调用](./imgs/CallProgram.png) ![主程序](./imgs/MainProgram.png)

- 右键点击主程序下任意一个调用，选择“添加指令”，即可在该调用下方添加调用Python宏程序、设置速度、设置IO、设置等待时间等操作。
![完整的主程序](./imgs/FullMainProgram.png)

# 界面

## 机器人面板

双击树状图中的机器人或者直接双击机器人3D模型，可以打开机器人面板，在这里可以点动控制机器人，双击关节轴上下限的数字可以调整上下限。
![机器人面板](./imgs/RobotPanel.png)

## 机器人位姿

在上述机器人面板中，点击“更多选项”可以看到在末端位姿不变的情况下其他的机器人关节参数组合。经典的6轴机器人在达到某一目标位置时通常可以有8种不同的位姿（假设每个关节轴都可旋转一整圈）。例如，机器人可以是肘部向上或者肘部向下（Up vs. Down，或者U/D），同时，它可以面向目标或者底座需要旋转180度达到目标（Front vs. Rear，或者F/R）。最后，机器人第5轴可能上下反转，同时第4轴与第6轴补偿第5轴的运动（Flip vs. Non-Flip，或者F/N）。以上共可提供2\*2\*2=8种不同的位姿。
![机器人位姿](./imgs/RobotPose.png)

## 物体设置

双击物体可以设置物体的位置、大小、颜色等。按住Ctrl选择多个物体，然后右键单击并选择“合并”，可以将多个物体合并为一个。

# 机器人程序

本节将介绍如何仅使用图形操作界面（GUI）创建机器人程序，后续的[RoboDK API](#robodk-api)章节将介绍使用RoboDK提供的API来编写更复杂的机器人程序。

## 新建程序

新建机器人程序的方法在前文[添加机器人运动程序](#添加机器人运动程序)已有说明，不再赘述。值得注意的是，当我们没有选中一个已有的机器人程序而直接添加指令（例如添加一个直线运动指令）时，会自动生成一个程序并将我们选择的指令添加到程序中。

## 程序指令

右键单击一个机器人程序，选择“添加指令”，即可添加各种各样的指令。这里只对个别指令进行详细介绍，常用指令不再赘述。
![添加指令](./imgs/AddInstruction.png)

### 显示信息指令

这个指令可以在程序执行到此处时在示教器上显示特定的提示信息，但并不是所有机器人控制器都支持在示教器上显示信息。所以对于那些不支持的设备，这条屏幕显示信息指令将不会起作用。

### 暂停指令

这个指令可以使程序暂停指定的时间，当时间设置为`-1`时将会一直暂停。

### 设置轨迹精度

这里的轨迹精度即运动时的转弯半径，在UR机器人叫Blending radius，ABB机器人叫ZoneData，FANUC机器人叫CNT/FINE。设置为`-1`表示精确按照设定轨迹移动。

### 仿真指令

这条指令主要是为了实现一些仿真中的视觉效果，可以实现将物体和末端工具绑定或解绑、显示或隐藏指定的物体或工具、以及改变物体的位置等。例如，在机器人抓放物体的场景中，当机器人移动到抓取位时，我们利用这条指令添加一个“Attach Object”的动作，就可以实现机器人把物体“抓”起来的效果，使物体跟着末端工具一起移动，同理在放置位我们利用“Detach Object”即可将抓取的物体“放”下。

# 机器人制造

本章主要介绍RoboDK和机器人在机械加工中的应用，比如CNC程序和机器人程序的转换以及相关的设置等。由于目前没有接触到这些应用场景，本章暂时跳过。

# 提示和技巧

本章介绍了一些有用的技巧和窍门以更有效地使用RoboDK软件。

- 使用`+`和`-`键可以放大和缩小参考坐标系。
- 选中树状图中的任意对象，然后按`F2`键可以快捷地进行重命名。
- 按`*`键可以显示机器人的工作空间，方便进行可达性的验证。双击机械臂可以在弹出的选项卡中切换末端法兰的工作空间和工具的工作空间。
- 在树状图中选中一个或多个对象，然后按`F7`键可以使其隐藏/显示。
- 按`/`键可以隐藏/显示屏幕上的文本。
- 按住鼠标右键拖放树状图中的项目可以调整其顺序。

# 一般提示

## 标定工具（TCP）

1. 选择“实用程序” → “定义工具坐标系(TCP)”；
2. 在“选择工具”下拉菜单中选择正确的工具；
3. 选择方法：通过点校准XYZ：变换不同的机器人位姿使TCP接触一个固定点。通过平面校准XYZ：变换不同的位姿使TCP接触一个固定平面，TCP可以是点或球形。
4. 默认校准使用“关节”，可以修改为“姿态”。
5. 如果有多个机器人，选择正确的机器人；
6. 设置用于标定TCP的点的数量，建议至少使用4个。
7. 移动机器人以获取几个点的位姿数据。
8. 点击“显示误差”可以看到每个点的误差大小，选择“更新”以应用标定好的工具。

## 定义参考坐标系

1. 选择“实用程序” → “定义参考系（用户框架）”；
2. 在“选择参考坐标系”下拉菜单中选择要标定的坐标系；
3. 在“选择方法”下拉菜单选择标定的方式，下面的图片会对应地显示该方式所需的点的位置。
4. 默认校准使用“关节”，可以修改为“姿态”。
5. 如果有多个机器人，选择正确的机器人；。
6. 移动机器人以获取几个点的位姿数据。
7. 选择“更新”以应用标定好的坐标系。

## 标定转台

注意，转台可以通过RoboDK在线资源库Robot Library添加现成的转台（Type选择Ext.axis即可看到），也可以按照[创建机构或机器人](#创建机构或机器人)的方式自定义转台模型。在标定转台前，应按照[同步外部轴](#同步外部轴)中的方法将机器人和转台进行同步，然后再进行标定。

### 标定一轴转台

1. 选择“实用程序” → “定义参考系（用户框架）”；
2. 在“选择参考坐标系”下拉菜单中选择要标定的转台坐标系；
3. 在“选择方法”下拉菜单选择“转台校准（1轴）。
4. 默认校准使用“关节”，可以修改为“姿态”。
5. 如果有多个机器人，选择正确的机器人；。
6. 移动机器人以获取几个点的位姿数据。
   1. 如下图所示，每一个点包含7个数据，前6个数表示机器人的位姿，最后蓝色的一列表示转台旋转的角度。如果没有出现蓝色的一列，请检查是否按照[同步外部轴](#同步外部轴)中的方法将机器人和转台进行同步。请注意，第一点将决定X轴的正方向。取点的规则是在通过末端工具触碰决定X轴正方向的第一点后，转台沿正方向旋转一定角度（可以适当大一点），然后用末端工具去触碰转台上同一个点，此时机器人的姿态就是p2。以此类推，获取至少6个点，在此过程中每次机器人末端工具触碰的都是转台上的同一个点。
   ![标定一轴转台](./imgs/CaliOneTurntable.png)
7. 选择“更新”以应用标定好的坐标系。

### 标定二轴转台

主要步骤与标定一轴转台相同，只是在“选择方法”下拉菜单选择“转台校准（2轴）。如下图所示，此时每个点将包含8个数据，即机器人位姿的6个数据和两列蓝色的数据分别表示转台两轴的角度。取点时，先使转台沿轴1正方向每次旋转一定角度取一系列点，再使转台沿轴2正方向每次旋转一定角度取一系列点，建议对于每个轴至少取6个点。请注意，整个取点过程中机器人末端工具始终触碰的是转台上的同一个点，且默认第一次绕着转台参考坐标系的X轴旋转，第二次绕着Z轴旋转，即轴1为X轴，轴2为Z轴。
![标定二轴转台](./imgs/CaliTwoTurntable.png)

## 创建机构或机器人

- 在RoboDK中可以按照下列步骤自定义创建新的机器人或机构：
  1. 选择“实用程序” → “模型机构或机器人”；
  2. 选择要创建的机构或机器人的类型；
  3. 设置坐标系；
  4. 为每个关节选择一个对象；
  5. 根据不同的机构或机器人类型按照界面上的提示和说明设置其他的参数；
  6. 点击“更新”以查看创建的机构或机器人。

- RoboDK支持创建以下类型的机构或机器人：一个旋转轴（转盘或抓手）、两个旋转轴（二轴定位器）、一个直线轴（直线导轨）、两个直线轴（T型机器人）、三个直线轴（H型机器人）、一个直线轴+一个旋转轴、两指夹爪、SCARA机器人（4轴）、六轴机械臂、七轴机械臂。

### 如何创建一轴转台

1. 选择“程序” → “添加参考坐标系”；
2. 选择参考坐标系，然后将其重命名为Turntable Base Ref；
3. 加载转盘的3D模型：将3D模型拖放到RoboDK窗口中（例如STL，STEP或IGES文件）；
4. 选择“实用程序” → “模型机构或机器人”；
5. 选择“一个旋转轴”；
6. 参考坐标系和对象项会自动填充，如果自动选择不正确，可以手动修改；
7. 设置旋转极限，例如我们想要±20转，可以输入±7200度；
8. 选择“更新”以生成创建的一轴转台，如下图所示。

![创建一轴转台](./imgs/OneAxisTurntable.png)

### 如何创建六轴机器人

参考文档 [如何创建六轴机器人](https://robodk.com.cn/doc/cn/General.html#Model6axis)。

### 如何创建三轴笛卡尔机器人

参考文档 [如何创建三轴笛卡尔机器人](https://robodk.com.cn/doc/cn/General.html#Model3axis)。

## 同步外部轴

要将机器人和外部轴同步，请按照以下步骤操作：
1. 导入机器人和外部轴到工作站中；
2. 将机器人和外部轴放置在合适的位置；
3. 选择“实用程序” → “同步外部轴”；
4. 选择要同步的机器人和外部轴；
5. 点击“确定”后，会打开机器人的设置页面，可以看到在“手动调节关节轴”一栏中除了机器人的关节轴一外，还会新增几行蓝色的轴参数，具体取决于同步的外部轴的轴数。同时，在左侧设计树中机器人和对应的外部轴图标上会增加一个链接🔗标识。

![同步外部轴示例](./imgs/ExtAxes.png)

# Plugins

## 用于SolidWorks












# 碰撞检测

# Robot Tips

# 后置处理器

# RoboDK API

# 机器人驱动

# Accuracy